<!-- HTML for static distribution bundle build -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>RocketChips API Documentation</title>
    <link rel="stylesheet" type="text/css" href="./swagger-ui.css" />
    <link rel="icon" type="image/png" href="./favicon-32x32.png" sizes="32x32" />
    <link rel="icon" type="image/png" href="./favicon-16x16.png" sizes="16x16" />
    <style>
      html
      {
        box-sizing: border-box;
        overflow: -moz-scrollbars-vertical;
        overflow-y: scroll;
      }

      *,
      *:before,
      *:after
      {
        box-sizing: inherit;
      }

      body
      {
        margin:0;
        background: #fafafa;
      }
    </style>
  </head>

  <body>

    <div id="swagger-ui"></div>
    <div class="swagger-ui">
      <div class="information-container wrapper">
        <div class="renderedMarkdown">
          <h2>Notifications</h2>
          <p>
            The RocketChips system uses AWS's Simple Notification Service (SNS) to notify
            API consumers when any of the following events occur:
          </p>

          <ul>
            <li>A customer submits an RFQ</li>
            <li>A customer adds a ship-to address</li>
            <li>A customer submits a sales order</li>
          </ul>

          <h3>Subscribing your HTTP endpoint (webhook)</h3>
          <p>
            In order to recieve these notifications you should provide an HTTP endpoint (webhook)
            capable of receiving a POST request and parsing a JSON-encoded request body. The process to
            subscribe your webhook is as follows:
          </p>
          <ol>
            <li>
              Contact <a href="mailto:kynan@36creative.com">kynan@36creative.com</a>, providing
              the URL of your webhook.
            </li>
            <li>
              Once your webhook is setup in the RocketChips system AWS will send your webhook a
              subscription confirmation request to confirm that you control the HTTP endpoint
              and are willing to accept messages sent by SNS. To confirm the subscription you
              should visit the URL provided by the <tt>SubscribeURL</tt> attribute in the
              confirmation message.
            </li>
            <li>
              Your webhook should now begin receiving messages from the RocketChips system.
            </li>
          </ol>

          <br />
          <h3>Notification Message Schema</h3>
          <p>See the <strong>NotificationMessage</strong> schema in the <strong>Schemas</strong> section above.</p>

          <br />
          <h3>RFQ Notifications</h3>
          <p>
            When a RocketChips customer user submits an RFQ a notification will be sent indicating
            the ID of the RFQ within the RocketChips system. Using the provided ID you may then
            fetch the RFQ's details using the RFQ REST API.
          </p>
          <p>
            <strong>Example notification payload:</strong>
          </p>
          <pre>
            {
              "Type" : "Notification",
              "MessageId" : "165545c9-2a5c-472c-8df2-7ff2be2b3b1b",
              "TopicArn" : "arn:aws:sns:us-west-2:123456789012:example-topic",
              "Message" : "{\"fo_entity_type\":\"RFQ\",\"fo_entity_data\":{\"salesperson\":0,\"hubspot_vid\":0,\"items\":[{\"mpn\":\"string\",\"mcode\":\"string\",\"quantity\":1,\"target\":\"12.00125\",\"date_code\":\"string\",\"comment\":\"string\",\"cipn\":\"string\",\"commodity_code\":\"DEFAULT\",\"offer_id\":0,\"fo_rfq_line_item_ref_id\":0}],\"fo_rfq_ref_id\":0}}",
              "Timestamp" : "2012-04-26T20:45:04.751Z",
              "SignatureVersion" : "1",
              "Signature" : "EXAMPLEpH+DcEwjAPg8O9mY8dReBSwksfg2S7WKQcikcNKWLQjwu6A4VbeS0QHVCkhRS7fUQvi2egU3N858fiTDN6bkkOxYDVrY0Ad8L10Hs3zH81mtnPk5uvvolIC1CXGu43obcgFxeL3khZl8IKvO61GWB6jI9b5+gLPoBc1Q=",
              "SigningCertURL" : "https://sns.us-west-2.amazonaws.com/SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem",
              "UnsubscribeURL": "https://sns.us-east-2.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-east-2:647697256804:fusion-sns-sandbox:cdbd10c6-eedf-4107-88d2-e3b40ddbad3f"
            }
          </pre>

          <p>
            The most relevant part of the message is contained in the <tt>Message</tt> attribute; this attribute
            is a string that contains a JSON-encoded message. The message contains the complete RFQ submission details (see the RFQ Submission schema above for more information).
          </p>

          <br />
          <h3>Sales Order Notifications</h3>
          <p>
            When a RocketChips customer user submits a sales order a notification will be sent indicating
            the ID of the sales order within the RocketChips system. Using the provided ID you may then
            fetch the sales order's details using the sales order REST API.
          </p>
          <p>
            <strong>Example notification payload:</strong>
          </p>
          <pre>
            {
              "Type" : "Notification",
              "MessageId" : "165545c9-2a5c-472c-8df2-7ff2be2b3b1b",
              "TopicArn" : "arn:aws:sns:us-west-2:123456789012:example-topic",
              "Message" : "{\"fo_entity_type\":\"SALES_ORDER\",\"fo_entity_data\":{\"hubspot_vid\":0,\"customer_purchase_order_num\":\"string\",\"entered_by\":0,\"ship_to\":{\"fo_ship_to_address_ref_id\":0,\"zip_code\":\"03801\",\"customer_id\":0,\"ship_to_name\":\"string\",\"address\":\"1 Marina Park Drive\\nSuite 7\",\"city\":\"string\",\"state\":\"string\",\"country\":\"US\",\"ship_via\":\"FedEx next day + account #\",\"vat_id\":\"string\"},\"due_date\":0,\"items\":[{\"item_master_id\":0,\"item_num_id\":0,\"cipn\":\"string\",\"mpn\":\"string\",\"mcode\":\"string\",\"quantity\":1,\"unit_sell_price\":\"12.00125\",\"rms_quote_detail_id\":null}],\"fo_order_ref_id\":0,\"fo_payment_status\":\"PREPAID\"}}",
              "Timestamp" : "2012-04-26T20:45:04.751Z",
              "SignatureVersion" : "1",
              "Signature" : "EXAMPLEpH+DcEwjAPg8O9mY8dReBSwksfg2S7WKQcikcNKWLQjwu6A4VbeS0QHVCkhRS7fUQvi2egU3N858fiTDN6bkkOxYDVrY0Ad8L10Hs3zH81mtnPk5uvvolIC1CXGu43obcgFxeL3khZl8IKvO61GWB6jI9b5+gLPoBc1Q=",
              "SigningCertURL" : "https://sns.us-west-2.amazonaws.com/SimpleNotificationService-f3ecfb7224c7233fe7bb5f59f96de52f.pem",
              "UnsubscribeURL": "https://sns.us-east-2.amazonaws.com/?Action=Unsubscribe&SubscriptionArn=arn:aws:sns:us-east-2:647697256804:fusion-sns-sandbox:cdbd10c6-eedf-4107-88d2-e3b40ddbad3f"
            }
          </pre>
          <p>
            The most relevant part of the message is contained in the <tt>Message</tt> attribute; this attribute
            is a string that contains a JSON-encoded message. The message contains the complete sales order details (see the Sales Order schema above for more information).
          </p>

          <br />
        </div>
      </div>
    </div>

    <script src="./swagger-ui-bundle.js" charset="UTF-8"> </script>
    <script src="./swagger-ui-standalone-preset.js" charset="UTF-8"> </script>
    <script>
    window.onload = function() {
      // Begin Swagger UI call region
      const ui = SwaggerUIBundle({
        url: "/yaml/rc-api-swagger.yaml",
        dom_id: '#swagger-ui',
        deepLinking: true,
        presets: [
          SwaggerUIBundle.presets.apis,
        ],
        requestInterceptor: function (req) {
          req.headers.Authorization = "Api-Key " + req.headers.Authorization;
          return req;
        }
      });
      // End Swagger UI call region

      window.ui = ui;
    };
  </script>

  </body>
</html>
